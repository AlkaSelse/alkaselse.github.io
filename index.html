<!DOCTYPE html>
<html style="height: 100%; margin: 0;">
<head>
<title>AWOIAF RP: HexMap</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="scripts/leaflet/leaflet.css">

<script src=scripts/leaflet/leaflet.js></script>
</head>



<body style="height: 100%; margin: 0;">
	
<div id="map" style="width: 100%; height: 100%; background: #333333; margin: 0;"></div>

<script type="text/javascript">

//Variables
var mapSW = [0, 8192], //will be arrays of pixels dimensions; add 1+max zoom variables x 256
	mapNE = [8192, 0];

// Declare Map Object
var map = L.map('map').setView([0, 0], 1); //sets default view location [lat,lng],zoom

// Reference the tils
L.tileLayer('maps/8192px HexMap/{z}/{x}/{y}.png', { //directory location of map tiles
	minZoom: 1, //Cannot zoom out past this point
	maxZoom: 5, //prevents breaking when zooming in too far
	continuousWorld: false,
	noWrap: true, //makes single contained image
	crs: L.CRS.Simple, //changes coordinate reference system to a simple one for pixel use
}).addTo(map);

map.setMaxBounds(new L.LatLngBounds(
	map.unproject(mapSW, map.getMaxZoom()),
	map.unproject(mapNE, map.getMaxZoom()),
));


//--- Movable Reference Marker to determine pixel coordinates for House placement ---//
var refmarker = L.marker([90, -150], { //creates marker object called 'marker' at [lat,lng]
	draggable: true, //makes the marker draggable
})
.addTo(map); //actually places onto map
refmarker.bindPopup('Drag this marker to learn coordinates!').openPopup(); //attaches popup object to this marker

refmarker.on('dragend', function(e) {
	refmarker.getPopup().setContent('Pixels ' + map.project(refmarker.getLatLng(), map.getMaxZoom().toString()))
	.openOn(map);
})

//Pixels
var klanding = L.marker(map.unproject([4659, 5413], map.getMaxZoom()));
klanding.bindPopup("<b>King's Landing</b>");
klanding.on('mouseover', function (e) {this.openPopup();});
klanding.on('mouseout', function (e) {this.closePopup();});


//-----MARKER PLACEMENTS-----//
//The Wall and Beyond


//The North
var winterfell = L.marker(map.unproject([4032, 2120], map.getMaxZoom()));
winterfell.bindPopup('<b>Winterfell</b>');
winterfell.on('mouseover', function (e) {this.openPopup();});
winterfell.on('mouseout', function (e) {this.closePopup();});

//The Iron Islands
var pyke = L.marker(map.unproject([2819, 4267], map.getMaxZoom()));
pyke.bindPopup('<b>Pyke</b>');
pyke.on('mouseover', function (e) {this.openPopup();});
pyke.on('mouseout', function (e) {this.closePopup();});


//The Riverlands


//The Vale


//The Westerlands


//The Reach


//The Crownlands


//The Stormlands


//Dorne


//---- LAYER GROUPS ----//
var lg_lordp = L.layerGroup([winterfell, klanding, pyke]); //Layer group for Lords Paramount and Crown

var lg_ghouse = L.layerGroup([]);//Layer group for greater noble houses

var lg_lhouse = L.layerGroup([]); //Layer group for lesser noble houses

var lg_drag = L.layerGroup([]); //Layer group for dragon sightings

var lg_rumor = L.layerGroup([]); //Layer group for rumors and events

var lg_army = L.layerGroup([]); //Layer group for armies and naval fleets

var lg_hbord = L.layerGroup([]); //Layer group for House territory borders

var lg_rbord = L.layerGroup([]); //Layer group for region territory borders

var overlays = {
	"Lords Paramount" : lg_lordp,
	"Greater Houses" : lg_ghouse,
	"Lesser Houses" : lg_lhouse,
	"Dragon Sightings" : lg_drag,
	"Rumors and Events" : lg_rumor,
	//"Armies and Navies" : lg_army,
	//"House Territories" : lg_hbord, - will be a tile layer
	//"Realm Borders" : lg_rbord, - will be a tile layer
}


// Add Layer Control
L.control.layers(/*baseLayers*/null, overlays).addTo(map);


/*--- Trying to find way to make certain layers show up only at specific zoom levels ----*/
//if (zoom > 1 && zoom <= 5 ) lg_lordp.addTo(map); else lg_lordp.removeFrom(map);


</script>

</body>	
</html>